## 도메인

소프트웨어로 구현할 문제 영역

## 도메인 모델

(도메인) 개념 모델 != (기술) 구현 모델

- 개념 모델 : 순수하게 문제를 분석한 결과물
- 구현 모델: 트랜잭션 처리, 성능 등 구현 기술을 고려한 모델

개념 모델 처음부터 완벽한 도메인 표현 불가능
소프트웨어 개발하는 동안 개발자와 관계자들은 해당 도메인을 더 잘 이해하게 됨  
⇒ 모델 보완/변경 발생

1. 요구사항(기획서, use case, 사용자 스토리), 관련자 대화 ⇒ 도메인 도출

2. 처음에는 전체 윤곽을 알 수 있는 수준으로 개념 모델 작성

3. 구현하는 과정에서 개념 모델을 구현 모델로 점진적으로 발전시키기

도메인에 따라 용어 의미가 결정되므로 여러 하위 도메인을 하나의 다이어그램에 모델링하면 안 됨

모델의 각 구성 요소는 특정 도메인으로 한정할 때 비로소 의미가 완전해지기 때문에 각 하위 도메인마다 별도로 모델을 만들어야 함

## 도메인 모델 패턴

아키텍처에 관한 것
여기서 도메인 모델은 도메인 계층을 구현할 때 사용하는 객체 모델을 말 함

- 표현 계층 : 사용자(혹은 외부 시스템) 요청 처리, 정보 보여주기
- 응용 계층 : 사용자 요청 기능 실행, 이때 업무 로직 직접 구현하지 않고 도메인 계층 조합해서 기능 실행
- 도메인 계층 :  시스템이 제공할 도메인 규칙 구현
- 인프라스트럭처 계층 : 외부 시스템(DB, 메시징 시스템) 연동

도메인 규칙을 객체 지향 기법으로 구현하는 패턴이 도메인 모델 패턴

<img width="608" alt="스크린샷 2024-05-11 오후 5 00 58" src="https://github.com/hongkikii/document/assets/110226866/0dc5f0a2-474a-4e8f-b3e2-4fa7ba5504b0">


## 문서화

코드를 보면서 도메인을 깊게 이해하게 되므로 코드 자체도 문서화의 대상이 됨

도메인 지식이 잘 묻어나도록 코드를 작성하지 않으면 코드의 동작 과정은 해석할 수 있어도,  
도메인 관점에서 왜 코드를 그렇게 작성했는지 이해하는 데 도움이 되지 않음

단순히 코드를 보기 좋게 작성하는 것뿐만 아니라 도메인 관점에서 코드가 도메인을 잘 표현해야  
비로소 코드의 가독성이 높아지고 문서로서 코드가 의미를 가짐

## 엔티티

가장 큰 특징 : 식별자를 가짐

도메인 모델의 클래스가 엔티티가 되고, 식별자를 속성으로 가짐

> 도메인 모델 엔티티 (vs DB 관계형 모델 엔티티)
> 
1. 데이터 뿐만 아니라 도메인 기능을 함께 제공하는 객체
    1. 도메인 관점에서 기능 구현
    2. 캡슐화해서 데이터가 임의로 변경되는 것을 막음
2. 두 개 이상의 데이터가 개념적으로 하나인 경우 밸류 타입을 이용해서 표현할 수 있음
