### 문제

```java
@RestController
public class ProductController {
	private List<Product> products = new ArrayList<>();
	
	@PostMapping("/products")
	public String register(@RequestBody Product product) {
		products.add(product);
		return "registered";
	}
	
	@GetMapping("/products")
	public List<Product> get() {
		return products;
	}
```

만약 또 다른 컨트롤러에서 products에 접근하고 싶다면?

데이터를 저장하고 보관하는 클래스를 따로 분리하면 되지 않을까?

<br>

> 레이어드 아키텍처
> 

하나의 소프트웨어를 여러 개의 계층으로 나누고, 각 계층의 책임과 역할을 구분하여 여러가지 제약을 두는 설계 방법.

소프트웨어를 유지보수하기 좋게 만들려는 노력의 일환!

<br>



### 표현(Presentation) 계층

- **Interface 계층**이라고도 부른다.
- **클라이언트**로부터 들어오는 **요청을 받고**, **응답해주는** 역할을 한다.
- Controller가 전형적인 표현 계층에 속하는 존재이다.
- 표현 계층으로 들어온 데이터는 값이 존재하는지, 타입이 맞는지 등 간단한 **유효성 검사**를 한 후 응용 계층으로 처리를 넘긴다.

### 응용(Application) 계층

- 표현 계층에서 넘겨 받은 데이터로 새로운 **자원**을 **저장**하거나, 저장되어 있던 자원을 **조회**해 온다.
- 여기서 자원은 **도메인 객체**(Domain Object)를 말한다.
- 조회된 도메인 객체의 메서드를 실행시킨다.
- Service가 주로 위치한다.

### 도메인(Domain) 계층

- 도메인의 핵심적인 지식이 있는 계층으로, 도메인 객체가 위치한다.
- 도메인 객체란 상품 관리 애플리케이션에서 ‘상품’과 같은 것이다.
- 도메인의 핵심적인 지식이란 상품 이름, 가격, 재고 수량 등 비즈니스와 관련된 요구사항이다.
- 도메인 계층은 **다른 계층이나 외부 요소에 의존하지 않도록** 만드는 것이 좋다.

<br>

> 도메인 객체란?
> 

애플리케이션에서 사용되는 **데이터**와 그 데이터를 다루는 **로직**을 하나로 묶은 것을 의미한다.

이때 단순히 데이터와 로직이 한 곳에 모이는 것뿐만 아니라, **애플리케이션의 핵심 지식**이 포함되어야 한다.

애플리케이션의 핵심 지식은 **비즈니스 로직**이나 **도메인 규칙**이라고 표현하며, **정책**이라고 이야기할 수도 있다.

예를 들어 ‘상품은 재고 수량 이상으로 주문할 수 없다’와 같은 개념이 비즈니스 로직이 될 수 있다.

최대한 이러한 로직이 모이도록 코드를 작성하면 도메인 코드가 된다.

반대로 도메인 객체에 비즈니스 로직이 모이지 않아 비즈니스 로직이 서비스 코드에 구현되면

도메인 객체의 응집력이 낮아지고 서비스 코드와의 결합도가 증가하여, 곳곳에 중복된 코드가 생기고 점점 유지보수하기 어려운 코드가 된다.

> 엔티티와 VO?
>
도메인 객체이면서 id를 가지는 존재를 **엔티티(Entity)** 라고 부른다.

도메인 객체이면서 id를 가지지 않는 존재를 **값 객체(Value Object)** 라고 부른다.

<br>

### 인프라스트럭처(InfraStructure) 계층

- 특정 인프라스트럭처에 접근하는 구현 코드들이 위치하는 계층이다.
- 리스트에 상품을 저장하는 로직이나, 데이터베이스에 상품을 저장하는 코드 등이 포함되어야 한다.
